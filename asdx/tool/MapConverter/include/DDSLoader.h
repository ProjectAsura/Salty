//--------------------------------------------------------------------------------------------
// File : DDSLoader.h
// Desc : Direct Draw Surface Loader Module.
// Copyright(c) Project Asura. All right reserved.
//--------------------------------------------------------------------------------------------

#ifndef __DDS_LOADER_H__
#define __DDS_LOADER_H__


//////////////////////////////////////////////////////////////////////////////////////////////
// TEXTURE_FORMAT_TYPE enum
//////////////////////////////////////////////////////////////////////////////////////////////
enum TEXTURE_FORMAT_TYPE
{
    TEXTURE_FORMAT_A8 = 0,
    TEXTURE_FORMAT_L8,
    TEXTURE_FORMAT_R8G8B8A8,
    TEXTURE_FORMAT_BC1,
    TEXTURE_FORMAT_BC2,
    TEXTURE_FORMAT_BC3,
};


//////////////////////////////////////////////////////////////////////////////////////////////
// DDSTexture class
//////////////////////////////////////////////////////////////////////////////////////////////
class DDSTexture
{
    //========================================================================================
    // list of friend classes and methods.
    //========================================================================================
    /* NOTHING */

public:
    //////////////////////////////////////////////////////////////////////////////////////////
    // ResourceData structure
    //////////////////////////////////////////////////////////////////////////////////////////
    struct ResourceData
    {
        unsigned int    width;          //!< 画像の横幅です.
        unsigned int    height;         //!< 画像の縦幅です.
        unsigned int    pitch;          //!< 1行当たりのデータサイズです.
        unsigned int    slicePitch;     //!< ピクセルデータのサイズです.
        unsigned char*  pPixelData;     //!< ピクセルデータです.
    };

    //========================================================================================
    // public variables.
    //========================================================================================
    /* NOTHING */

    //========================================================================================
    // public methods.
    //========================================================================================

    //----------------------------------------------------------------------------------------
    //! @brief      コンストラクタです.
    //----------------------------------------------------------------------------------------
    DDSTexture();

    //----------------------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //----------------------------------------------------------------------------------------
    virtual ~DDSTexture();
    
    //----------------------------------------------------------------------------------------
    //! @brief      メモリ解放処理です.
    //----------------------------------------------------------------------------------------
    void Release();

    //----------------------------------------------------------------------------------------
    //! @brief      ファイルからロードします.
    //!
    //! @param [in]     filename        入力ファイル名.
    //! @retval true    ロードに成功.
    //! @retval false   ロードに失敗.
    //----------------------------------------------------------------------------------------
    bool LoadFromFile( const char* filename );

    //----------------------------------------------------------------------------------------
    //! @brief      バイナリ保存します.
    //!
    //! @param [in]     filename        出力ファイル名.
    //! @retval true    バイナリ出力に成功.
    //! @retval false   バイナリ出力に失敗.
    //----------------------------------------------------------------------------------------
    bool SaveToBinary( const char* filename );

protected:
    //========================================================================================
    // protected variables.
    //========================================================================================
    unsigned int     m_Width;             //!< 画像の横幅です.
    unsigned int     m_Height;            //!< 画像の縦幅です.
    unsigned int     m_Format;            //!< 画像フォーマットです.
    unsigned int     m_MipMapCount;       //!< ミップマップ数です.
    ResourceData*    m_pResourceData;     //!< リソースデータです.

    //========================================================================================
    // protected methods.
    //========================================================================================
    /* NOTHING */

private:
    //========================================================================================
    // private variables.
    //========================================================================================
    /* NOTHING */

    //========================================================================================
    // private methods.
    //========================================================================================
    /* NOTHING */
};

#endif//__DDS_LOADER_H__