//-----------------------------------------------------------------------------
// File : s3d_app.h
// Desc : Application Module.
// Copyright(c) Project Asura. All right reserved.
//-----------------------------------------------------------------------------

#ifndef __S3D_APP_H__
#define __S3D_APP_H__

//-----------------------------------------------------------------------------
// Includes
//-----------------------------------------------------------------------------
#include <s3d_typedef.h>
#include <s3d_rendertarget.h>
#include <s3d_rand.h>
#include <s3d_shape.h>
#include <s3d_bvh.h>
#include <s3d_camera.h>
#include <s3d_timer.h>


namespace s3d {

///////////////////////////////////////////////////////////////////////////
// Config structure
///////////////////////////////////////////////////////////////////////////
struct Config
{
    u32     Width;                  //!< 画像の横幅です.
    u32     Height;                 //!< 画像の縦幅です.
    u32     NumSamples;             //!< サンプル数です.
    u32     NumSubSamples;          //!< サブサンプル数です.
    s32     MaxDepth;               //!< 打ち切り深度.
    char    SceneFileName[256];     //!< シーンファイル名です.
};

///////////////////////////////////////////////////////////////////////////////
// App class
///////////////////////////////////////////////////////////////////////////////
class App
{
    //=========================================================================
    // list of friend classes and methods.
    //=========================================================================
    /* NOTHING */

public:
    //=========================================================================
    // public variables.
    //=========================================================================
    /* NOTHING */

    //=========================================================================
    // public methods.
    //=========================================================================

    //-------------------------------------------------------------------------
    //! @brief      コンストラクタです.
    //-------------------------------------------------------------------------
    App();

    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    virtual ~App();

    //-------------------------------------------------------------------------
    //! @brief      アプリケーションを実行します.
    //-------------------------------------------------------------------------
    void Run( const Config& );

protected:
    //=========================================================================
    // protected variables.
    //=========================================================================
    /* NOTHING */

    //=========================================================================
    // protected methods.
    //=========================================================================
    //bool Intersect( const Ray& ray, HitRecord& record );
    //Color PathTrace( const Ray& ray, Random& rand );
    //bool SaveImage();

private:
    //=========================================================================
    // private variables.
    //=========================================================================
//    u32             m_Width;            //!< レンダーターゲットの横幅です.
//    u32             m_Height;           //!< レンダーターゲットの縦幅です.
//    u32             m_NumSamples;       //!< サンプル数です.
//    u32             m_NumSubSamples;    //!< サブサンプル数です.
//    s32             m_MaxDepth;         //!< 打ち切り深度.
//    RenderTarget    m_RenderTarget;     //!< レンダーターゲットです.
//    Scene           m_Scene;            //!< シーンデータです.
//    bool            m_ForceExit;        //!< 強制終了するかどうかのフラグです.
//    bool            m_IsRendered;       //!< レンダリングが完了したかどうかのフラグです.

    //=========================================================================
    // private methods.
    //=========================================================================
    App             ( const App& );     // アクセス禁止.
    void operator = ( const App& );     // アクセス禁止.

//    //-------------------------------------------------------------------------
//    //! @brief      アプリケーションの初期化を行います.
//    //-------------------------------------------------------------------------
//    bool InitApp();
//
//    //-------------------------------------------------------------------------
//    //! @brief      アプリケーションの終了を行います.
//    //-------------------------------------------------------------------------
//    void TermApp();
//
//    //-------------------------------------------------------------------------
//    //! @brief      レンダリングします.
//    //-------------------------------------------------------------------------
//    void Render();
};


} // namespace s3d

#endif//__S3D_APP_H__