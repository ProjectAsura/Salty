//----------------------------------------------------------------------------
// File : s3d_mutex.cpp
// Desc : Mutex Moudule.
// Copyright(c) Project Asura. All right reserved.
//----------------------------------------------------------------------------

//----------------------------------------------------------------------------
// Includes
//----------------------------------------------------------------------------
#include <s3d_mutex.h>

namespace s3d {

//////////////////////////////////////////////////////////////////////////////
// Mutex class
//////////////////////////////////////////////////////////////////////////////

//----------------------------------------------------------------------------
//      コンストラクタです.
//----------------------------------------------------------------------------
Mutex::Mutex()
{
    InitializeCriticalSection( &m_CS );
}

//----------------------------------------------------------------------------
//      デストラクタです.
//----------------------------------------------------------------------------
Mutex::~Mutex()
{
    DeleteCriticalSection( &m_CS );
}

//----------------------------------------------------------------------------
//      鍵を掛けます.
//----------------------------------------------------------------------------
void Mutex::Lock()
{
    EnterCriticalSection( &m_CS );
}

//----------------------------------------------------------------------------
//      鍵を解除します.
//----------------------------------------------------------------------------
void Mutex::Unlock()
{
    LeaveCriticalSection( &m_CS );
}

//----------------------------------------------------------------------------
//      鍵を掛けるのを試みます.
//----------------------------------------------------------------------------
bool Mutex::TryLock()
{
    return ( TryEnterCriticalSection( &m_CS ) == TRUE );
}

} // namespace s3d
